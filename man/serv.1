.TH SERV 1 "February 2026" "serv" "User Commands"
.SH NAME
serv \- lightweight HTTP/HTTPS file server with access controls
.SH SYNOPSIS
.B serv
.RI [ options ]
.SH DESCRIPTION
serv is a lightweight Go HTTP/HTTPS file server for sharing a directory.
It provides TLS (including optional mTLS), basic auth with optional per-directory
\&.htaccess overrides, IP allowlists, custom response headers, redirects, and a
custom directory listing.
.PP
serv is secure by default. It blocks path traversal, symlink and hardlink escapes,
serving dotfiles, and never serves .htaccess. Configured TLS cert/key/CA files
are never listed or downloadable, even if they live in the served tree or are
symlinked into it.
.SH OPTIONS
.TP
.BR \-port " " \fIN\fR
Port to listen on. Default is 8889.
.TP
.BR \-ip " " \fIADDR\fR
IP address to listen on. Default is 127.0.0.1.
.TP
.BR \-log " " \fIPATH\fR
Log file path. Empty writes to stdout.
.TP
.BR \-dir " " \fIPATH\fR
Directory to serve. Default is the current working directory.
.TP
.BR \-cacert " " \fIPATH\fR
Path to CA certificate file for TLS (optional). When
.BR \-mtls
is enabled, this CA bundle is used to verify client certificates.
.TP
.BR \-cert " " \fIPATH\fR
Path to host certificate file for TLS (optional).
.TP
.BR \-key " " \fIPATH\fR
Path to private key file for TLS (optional).
.TP
.BR \-mtls
Require client certificate for TLS (optional).
.TP
.BR \-username " " \fIUSER\fR
Username for basic auth (optional). Supports
.B env:VAR
or
.B file:/path/to/file
for JSON credentials.
.TP
.BR \-password " " \fIPASS\fR
Password for basic auth (optional). Supports
.B env:VAR
or
.B file:/path/to/file
for JSON credentials.
.TP
.BR \-insecure
Allow insecure symlinks and files. Disables symlink and hardlink checks.
.TP
.BR \-allowdotfiles
Allow files starting with a dot (except .htaccess).
.TP
.BR \-allowedips " " \fILIST\fR
Comma-separated list of allowed IPs or CIDR blocks.
.TP
.BR \-header " " \fIKEY:VALUE\fR
HTTP headers to include in the response. Can specify multiple.
.TP
.BR \-redirect " " \fIFROM:TO\fR
Redirects to add. Can specify multiple.
.TP
.BR \-filter " " \fIGLOB\fR
Glob patterns to hide from directory listings and block direct access.
Can specify multiple.
.TP
.BR \-upload
Enable browser uploads (optional).
.TP
.BR \-uploadmaxmb " " \fIN\fR
Maximum upload request size in MB (optional). Default is 100.
Set to 0 for unlimited request size.
.TP
.BR \-uploadoverwrite
Allow uploaded files to overwrite existing files.
.SH HTACCESS
If a .htaccess file exists in a directory (or any parent up to the served root),
its username/password override the CLI \-username/\-password for that subtree.
The format supports username/password entries with ':' or '=' delimiters
(e.g. "username: admin"). .htaccess is never served to clients.
.SH SECURITY
By default, serv rejects path traversal, symlink escapes, and hardlinks.
It hides dotfiles and sensitive TLS files from listings and direct access.
Use \-insecure or \-allowdotfiles only if you understand the risks.
If TLS cert/key/CA files are configured, serv never lists or serves those
specific files, even if they live in the served tree or are symlinked or
hardlinked into it.
.SH EXAMPLES
Serve the current directory on the default address and port:
.PP
.RS
.nf
serv
.fi
.RE
.PP
Serve over HTTPS with basic auth:
.PP
.RS
.nf
serv -cert server.crt -key server.key -username admin -password admin
.fi
.RE
.PP
Serve with basic auth loaded from a JSON file:
.PP
.RS
.nf
serv -username file:/tmp/serv-creds.json -password file:/tmp/serv-creds.json
.fi
.RE
.PP
Restrict access and add custom headers:
.PP
.RS
.nf
serv -allowedips 192.168.1.0/24,10.0.0.1 -header 'X-Env:dev'
.fi
.RE
.SH FILES
.B .htaccess
Per-directory credentials file (never served).
.SH EXIT STATUS
.B 0
Success.
.PP
.B non-zero
An error occurred.
.SH SEE ALSO
.BR go (1)
